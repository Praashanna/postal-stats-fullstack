import{l as b,q as y,s as B,j as e,S as a,L as c}from"./index-bOg5e1e7.js";import{E as D}from"./error-state-Clm4qvnx.js";import{B as t,C as n,a as d,b as o,d as m,c as C}from"./card-D_x7gIuc.js";import{S,a as T,b as L,c as P,d as r}from"./select-CCRde_uN.js";import{B as E,T as z,a as H,b as p,c as x,d as O,e as h}from"./badge-D3VItwhe.js";import{M as f}from"./mail-C9Dw5UVI.js";import{U as v,A as U}from"./users-B8a58puQ.js";import"./circle-x-D4EhXaT5.js";import"./createLucideIcon-D0HCzro4.js";import"./index-GDyHvPTc.js";import"./index-BQWGh_0_.js";function J(){const{serverId:l}=b(),{period:j,setPeriod:N}=y(),{data:s,isLoading:g,error:u}=B(l||"",j);return l?g&&!s?e.jsxs("div",{className:"w-full p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{className:"h-8 w-64"}),e.jsx(a,{className:"h-10 w-32"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{className:"h-10 w-32"}),e.jsx(a,{className:"h-10 w-32"}),e.jsx(a,{className:"h-10 w-32"})]}),e.jsx(a,{className:"h-96 w-full"})]}):u?e.jsx(D,{error:u,message:"Failed to load bounce data",type:"mail"}):e.jsxs("div",{className:"w-full p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Bounces Overview"}),s&&e.jsxs(E,{variant:"secondary",children:[s.totalBounces??0," total"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(S,{value:j,onValueChange:N,children:[e.jsx(T,{className:"w-[180px]",children:e.jsx(L,{placeholder:"Select period"})}),e.jsxs(P,{children:[e.jsx(r,{value:"today",children:"Today"}),e.jsx(r,{value:"yesterday",children:"Yesterday"}),e.jsx(r,{value:"7d",children:"Last 7 days"}),e.jsx(r,{value:"14d",children:"Last 14 days"}),e.jsx(r,{value:"30d",children:"Last 30 days"})]})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{variant:"default",size:"sm",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(c,{to:`/server/${l}/bounces/domain`,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Bounced Domains"]})}),e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(c,{to:`/server/${l}/bounces/email`,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Bounced Emails"]})})]}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Bounces"}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalBounces??0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in the selected period"})]})]}),e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Unique Domains"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalDomains||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"affected domains"})]})]})]}),s.topDomains&&s.topDomains.length>0&&e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Top Bounced Domains"}),e.jsx(C,{children:"Domains with the highest bounce rates"})]}),e.jsxs(m,{children:[e.jsxs(z,{children:[e.jsx(H,{children:e.jsxs(p,{children:[e.jsx(x,{children:"Domain"}),e.jsx(x,{className:"text-right",children:"Bounces"}),e.jsx(x,{className:"text-right",children:"Percentage"})]})}),e.jsx(O,{children:s.topDomains.slice(0,10).map((i,w)=>e.jsxs(p,{children:[e.jsx(h,{className:"font-medium",children:i.domain}),e.jsx(h,{className:"text-right",children:i.count.toLocaleString()}),e.jsxs(h,{className:"text-right",children:[(i.count/s.totalBounces*100).toFixed(1),"%"]})]},w))})]}),s.topDomains.length>10&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(c,{to:`/server/${l}/bounces/domain`,children:["View all ",s.topDomains.length," domains â†’"]})})})]})]})]})]}):e.jsx("div",{className:"p-6",children:"Please select a server from the sidebar."})}export{J as BouncesOverviewPage};
